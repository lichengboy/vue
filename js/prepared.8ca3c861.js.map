{"version":3,"sources":["webpack:///./src/views/prepared.vue","webpack:///./src/utils/prepared.js","webpack:///./src/service/base.js","webpack:///src/views/prepared.vue","webpack:///./src/views/prepared.vue?eef2","webpack:///./src/views/prepared.vue?aab3"],"names":["render","_vm","this","_c","_self","staticStyle","attrs","on","search","_v","dataList","comFmter","row","typeDic","type","staticRenderFns","prepared","count","_preparedCount","_preparedResolve","_prepared","reset","Promise","resolve","reject","data","methods","preparedThen","callback","then","prepareSubmit","created","getCompanies","setTimeout","getTypes","getData","comCode","mixins","compDic","component"],"mappings":"iHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,CAAC,OAAS,UAAU,CAACF,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWC,GAAG,CAAC,MAAQN,EAAIO,SAAS,CAACP,EAAIQ,GAAG,QAAQN,EAAG,WAAW,CAACG,MAAM,CAAC,KAAOL,EAAIS,WAAW,CAACP,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,KAAK,KAAO,UAAU,UAAYL,EAAIU,YAAYR,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,KAAK,KAAO,OAAO,UAAYM,GAAKV,KAAKW,QAAQD,EAAIE,MAAMZ,KAAKW,QAAQD,EAAIE,MAAMF,EAAIE,SAAS,IAAI,IAExcC,EAAkB,GCFP,SAASC,EAASC,EAAQ,GACvC,IAAIC,EACAC,EACAC,EACJ,MAAMC,EAAQ,KACZH,EAAiBD,EACjBG,EAAY,IAAIE,QAAQ,CAACC,EAASC,KAChCL,EAAmBI,KAIvB,OADAF,IACO,CACLI,OACE,MAAO,CACLT,UAAU,IAGdU,QAAS,CACPC,aAAaC,GACXR,EAAUS,KAAKD,IAEjBE,gBACEZ,IACuB,IAAnBA,IACFC,IACAjB,KAAKc,UAAW,KAItBe,UACEV,MC9BC,SAASW,IACd,OAAO,IAAIV,QAAQ,CAACC,EAASC,KAC3BS,WAAW,KACTV,EAAQ,CACN,KAAQ,WACR,KAAQ,WACR,KAAQ,cAET,QAIA,SAASW,IACd,OAAO,IAAIZ,QAAQ,CAACC,EAASC,KAC3BS,WAAW,KACTV,EAAQ,CACN,GAAM,QACN,GAAM,QACN,GAAM,WAEP,OAIA,SAASY,IACd,OAAO,IAAIb,QAAQ,CAACC,EAASC,KAC3BS,WAAW,KACTV,EAAQ,CAAEE,KAAM,CACd,CAAEW,QAAS,OAAQtB,KAAM,MACzB,CAAEsB,QAAS,OAAQtB,KAAM,MACzB,CAAEsB,QAAS,OAAQtB,KAAM,UAE1B,OCfQ,OACfuB,cACAZ,OACA,OACAf,YACA4B,WACAzB,aAGAa,SACAlB,SACA,uBACA2B,aACA,0BAIAxB,cACA,mEAGAoB,UACAC,aACA,eACA,uBAGAE,aACA,eACA,uBAGA,gBCjDkV,I,YCO9UK,EAAY,eACd,EACAvC,EACAe,GACA,EACA,KACA,KACA,MAIa,aAAAwB,E","file":"js/prepared.8ca3c861.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticStyle:{\"margin\":\"120px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")]),_c('el-table',{attrs:{\"data\":_vm.dataList}},[_c('el-table-column',{attrs:{\"label\":\"公司\",\"prop\":\"comCode\",\"formatter\":_vm.comFmter}}),_c('el-table-column',{attrs:{\"label\":\"类型\",\"prop\":\"type\",\"formatter\":row=>this.typeDic[row.type]?this.typeDic[row.type]:row.type}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function prepared(count = 1) {\r\n  let _preparedCount\r\n  let _preparedResolve\r\n  let _prepared\r\n  const reset = () => {\r\n    _preparedCount = count\r\n    _prepared = new Promise((resolve, reject) => {\r\n      _preparedResolve = resolve\r\n    })\r\n  }\r\n  reset()\r\n  return {\r\n    data() {\r\n      return {\r\n        prepared: false\r\n      }\r\n    },\r\n    methods: {\r\n      preparedThen(callback) {\r\n        _prepared.then(callback)\r\n      },\r\n      prepareSubmit() {\r\n        _preparedCount--\r\n        if (_preparedCount === 0) {\r\n          _preparedResolve()\r\n          this.prepared = true\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n      reset()\r\n    }\r\n  }\r\n}\r\n","export function getCompanies() {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n      resolve({\r\n        '1001': 'CompanyA',\r\n        '1002': 'CompanyB',\r\n        '1003': 'CompanyC',\r\n      });\r\n    }, 2200)\r\n  })\r\n}\r\n\r\nexport function getTypes() {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n      resolve({\r\n        '10': 'Type1',\r\n        '20': 'Type2',\r\n        '30': 'Type3',\r\n      });\r\n    }, 500)\r\n  })\r\n}\r\n\r\nexport function getData() {\r\n  return new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n      resolve({ data: [\r\n        { comCode: '1001', type: '20' },\r\n        { comCode: '1002', type: '10' },\r\n        { comCode: '1003', type: '30' },\r\n      ]})\r\n    }, 150)\r\n  })\r\n}\r\n","<template>\r\n  <div style=\"margin: 120px\">\r\n    <!-- {{prepared}} -->\r\n    <el-button type=\"primary\" @click=\"search\">查询</el-button>\r\n    \r\n\r\n    <el-table :data=\"dataList\">\r\n      <el-table-column label=\"公司\" prop=\"comCode\" :formatter=\"comFmter\"></el-table-column>\r\n      <el-table-column label=\"类型\" prop=\"type\" :formatter=\"row=>this.typeDic[row.type]?this.typeDic[row.type]:row.type\"></el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport prepared from '@/utils/prepared';\r\nimport { getCompanies, getTypes, getData } from '@/service/base';\r\n\r\nexport default {\r\n  mixins: [prepared(2)],\r\n  data() {\r\n    return {\r\n      dataList: [],\r\n      compDic: {},\r\n      typeDic: {},\r\n    }\r\n  },\r\n  methods: {\r\n    search() {\r\n      this.preparedThen(() => {\r\n        getData().then(res => {\r\n          this.dataList = res.data;\r\n        })\r\n      })\r\n    },\r\n    comFmter(row, column) {\r\n      return this.compDic[row.comCode] ? this.compDic[row.comCode] : row.comCode;\r\n    }\r\n  },\r\n  created() {\r\n    getCompanies().then(res => {\r\n      this.compDic = res;\r\n      this.prepareSubmit();\r\n    });\r\n\r\n    getTypes().then(res => {\r\n      this.typeDic = res;\r\n      this.prepareSubmit();\r\n    });\r\n\r\n    this.search();\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prepared.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./prepared.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./prepared.vue?vue&type=template&id=79adfc60&\"\nimport script from \"./prepared.vue?vue&type=script&lang=js&\"\nexport * from \"./prepared.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}